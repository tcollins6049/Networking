# 2.2 The Web and HTTP

## 2.2.1 Overview of HTTP
- The **HyperText Transfer Protocol (HTTP)**, the web's application-layer protocol, is implemented in two programs: a client program and a server program.
- The client and server programs on different end systems communicate with eachother by exchanging HTTP messages.
- HTTP defines the structure of these messages and how the client and server exchange these messages.

Some web terminology:
- A **Web Page** (Also called a document) consists of objects.
- An **Object** is a file, (such as an HTML file), that is addressable by a single URL.
- Most web pages consist of a **base HTML file** and several referenced objects.

- HTTP defines how web clients request web pages from web servers and how servers transfer web pages to clients.
- The word client here will reference a web browser.
- HTTP uses TCP as its underlying transport protocol (rather than UDP).
- The HTTP client first initiates a TCP connection with the server. Once that connection is established, the browser and the server processes access TCP through their socket interfaces.
- The socket is the door between the client process and the TCP connection on the client side.
- Since an HTTP server maintains no information about the clients, HTTP is said to be a **stateless protocol**.

## 2.2.2 Non-Persistent and Persistent Connections
- When a client-server interaction is taking place over TCP, the application developer must decide if all request/response pairs should be over different TCP connections or the same TCP connection. So either a **non-persistent connection** or a **persistent connection**.
- HTTP uses persitent connection by default.

### HTTP with Non-Persistent Connections
1. HTTP client process initiates a TCP connection to the server.
2. HTTP client sends an HTTP request message to the server via its socket.
3. HTTP server process recieves the request message via its socket, retrieves the object from its storage, encapsulates the object in an HTTP response message, and sends the response message to the client via its socket.
4. HTTP server process tells TCP to close the TCP connection. (TCP does not terminate until it knows for certain that the client has recieved the response message intact).
5. HTTP client recieves response message. TCP connection terminates.
6. Those steps are then repeated for any referenced objects.

- **round-trip time (RTT)**: Amount of time that elapses from when a client requests the base HTML file until the entire file is recieved by the client.
- The RTT includes packet-propogation delays, packet-queuing delays, and packet-processing delays.

## 2.2.3 HTTP Message Format

### HTTP Request Message
```
GET /somedir/page.html HTTP/1.1
Host: www.someschool.edu
Connection: close
User-agent: Mozilla/5.0
Accept-language: fr
```
- First line called the **request line**, subsequest lines are called **header lines**.
- The request line has three fields: the method field, the URL field, and the HTTP version field.
- *Host:* -  Specifies the host at which the object resides. This line is required by Web proxy caches.
- *Connection: close* - Browser is telling server that it doesn't want to bother with persistent connections, wants server to close connection after sending object.
- *User-agent:* - specifies the user agent, the browser type that is making the request to the server.
- *Accept-language: fr* - Indicates that the user prefers to recieve a French version of the object, if one exists.

### HTTP Response Message
```
HTTP/1.1 200 OK
Connection: close
Date: Tue, 18 Aug 2015 15:44:04 GMT
Server: Apache/2.2.3 (CentOS)
Last-Modified: Tue, 18 Aug 2015 15:11:03 GMT
Content-Length: 6821
Content-Type: text/html

(data data data data data ...)
```
- Has 3 sections, an initial **status line**, 6 **header lines**, and then the **entity body**.
- The **entity body** contains the requested object itself.
- **status line** has three fields: the protocol version field, a status code, and a corresponding status message.
- *Connection: close* - Tells client that it is going to close the TCP connection.
- *Date:* - Indicates the time and date when the HTTP response was created and sent by the server.
- *Server:* - Indicates that the message was generated by an Apache Web Server, analogous to the user agent
- *Last-Modified:* - Indicates the time and date when the object was created or last modified.
- *Content-Length:* - Indicates the number of bytes in the object being sent.
- *Content-Type:* Indicates that the object in the entity body is HTML text.

## 2.2.4 User-Server Interaction: Cookies
- 




















